<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Pagebox</title>
    <script type="text/javascript" src="Scripts/webdesk.ui.core.js"></script>
    <link rel="stylesheet" type="text/css" href="Styles/pagebox.css" />
    <script type="text/javascript" src="Scripts/events.js"></script>
    <script type="text/javascript" src="Scripts/pagebox.js"></script>
    <style type="text/css">
        html,
        body {
            overflow: hidden;
        }
        
        dl {
            counter-reset: show-list;
            margin: 0px;
            padding-left: 20px;
        }
        
        dt {
            font-weight: bold;
        }
        
        dd {
            position: relative;
            margin-left: 0px;
            counter-increment: item;
        }
        
        dd:before {
            content: counter(item)".";
            display: block;
            float: left;
            margin-right: 10px;
        }
        
        dl.last dd {
            display: block;
        }
        
        #show {
            position: absolute;
            left: 0px;
            right: 0px;
        }
        
        h1:before {
            content: "\e77e";
            font-size: 40px;
            margin-right: 10px;
        }
    </style>
</head>

<body>
    <div id="show"></div>
    <div style="margin: 0px;height: 30%;padding: 40px;">
        <h1 class="webdesk_icon">说明</h1>
        <div>我想它应该有如下功能：</div>
        <ul>
            <li>可拖放，可缩放，模拟windows桌面窗体</li>
            <li>上溯父级，查找父对像，父对象文档对象，父子窗体可互动</li>
            <li>遍历下级，以及子对象的文档对象</li>
            <li>事件：多播事件，可追加、可去除</li>
        </ul>
    </div>

    <dl style="height: 20%;width: 30%; position: absolute;right: 0px;top:0px;">
        <dt>备注一下</dt>
        <dd> 宽度高度可以百分比</dd>
        <dd> 设置最小宽高度</dd>
        <dd> 设置自动宽高（应用于当浏览器窗体变化时，pagebox能自动调整位置）</dd>
    </dl>
    <dl style="height: 60%;width:60%; position: absolute;bottom: 0px;left:0px;overflow: auto;">
        <dt>事件：</dt>

        <dd>init 初始化完成</dd>
        <dd>shown 当第一次显示</dd>
        <dd>click 鼠标单击窗体时，如果iframe中的内容被单击时，Iframe有了焦点，当firame有焦点时，窗体拥有焦点（激发Foucs事件）。</dd>
        <dd>resize 当窗体大小变化时</dd>
        <dd>resizeBegin, resizeEnd 窗体大小开始变化，结束变化时</dd>
        <dd>drop 拖放操作时</dd>
        <dd>dropBegin,dropEnd，开始移动，结束移动</dd>
        <dd>focus 当窗体获取焦点时</dd>
        <dd>blur 当窗体失去焦点时</dd>
        <dd>hover 当鼠标滑过或悬停窗体时</dd>
        <dd>hoverout 鼠标离开窗体时</dd>
        <dd>close 当窗体关闭时</dd>
        <dd>min,full,restore,最小化时，最大化时，还原时,e参数将用于识别哪种方式还原</dd>
        <dd>load，当iframe加载完成时，触发pagebox的load事件</dd>
        <hr />
        <div>click(sender,e);<br> 参数：sender：pagebox对象；

            <br> 参数：e:

            <br> e.target pagebox html元素（即Node型对象）<br> e.x,e.y：当鼠标点击或移动事件的鼠标坐标

            <br> e.movex,e.movey：鼠标移动的移动距离

            <br> e.left,e.top：pagebox的坐标<br> e.action,动作，一般情况下为事件名称，也可能不是，例如restore还原窗体时，为提示是fullrestore，还是minrestore，即从最大化还原来的，还是最小化还原来的

        </div>
    </dl>
    <dl style="height: 60%;width:20%; position: absolute;bottom: 0px;right: 0px;overflow: auto;">
        <dt>左上图标，点击弹出下拉菜单</dt>

        <dd>关闭</dd>
        <dd>固定位置（不允许拖动、缩放）</dd>
        <dd>贴边到右侧</dd>
        <dd>贴边到右侧</dd>
        <dd>最上层（所有pagebox最上层）</dd>
        <div>------------</div>
        <dd>刷新</dd>
        <dd>定时刷新（5秒）</dd>
        <dd>定时刷新（10秒）</dd>
        <div>------------</div>
        <dd>最小化</dd>
        <dd>最大化</dd>
        <dd>还原</dd>
    </dl>


</body>
<script type="text/javascript">
    window.setInterval(function() {
        var show = $dom('#show');
        show.text(window.msg);
    }, 10);
    /*
    //直接创建
    new pagebox({
        height: 220,
        width: 320,
        top: 120,
        left: 300,
        move: false,
        //url: 'http://www.168fff.cn/mobile/default.ashx?skip=false',
        title: '禁止移动'
    }).open();
    */
    //直接创建
    pagebox.open({
        width: 400,
        height: 300,
        resize: true,
        url: 'pagebox -child.html',
        title: '可移动，可缩放；双击标题栏全屏'
    });
/*
    //
    var tm=pagebox.create({
        height: 200,
        width: 320,
        top: 40,
        left: 150,
        resize: false,
        min: false,
        max: false,
        //url: 'plan.html',
        url: 'http://www.weisha100.cn/mobile/default.ashx?skip=false',
        title: '禁止缩放'
    });
    tm.onload(function(sender,e){
        console.log(e.event);
    });
    tm.open();
    //直接创建
    var box = pagebox.create({
        height: 400,
        width: 320,
        top: 120,
        left: 450,
        min: true,
        max: false,
        //url: 'http://www.weisha100.cn/mobile/default.ashx?skip=false',
        title: '禁用最大化按钮'
    });
    
    box.onshown(function (sender, e) {
        console.log('onshown');
    });
    box.oninit(function (sender, e) {
        console.log('初始化时的ID：' + sender.id);
    });
    var tm = function (sender, e) {
        window.msg = '鼠标：x_' + e.mouse.x + ",y_" + e.mouse.y + ',移动：' + e.move.x + '，宽：' + e.width;
    };
    box.ondrag(tm).onresize(tm);
    box.onclick(function (sender, e) {
        console.log('onclick' + sender.title);
        return 'onlclick';
    });
    box.open();

    var res = box.onclick();
    //console.log(res);
    //box.init('测试事件');
    var last = $dom('.pagebox').last();

    //批量增加事件
    $ctrls.each(function() {
        this.onclose(function(sender, e) {
            var size = $ctrls.size();
            console.log('打开的窗体剩余:' + size);
        });
        this.onblur(function(sender, e) {
            console.log('失去焦点的窗体:' + sender.title);
        }).onfocus(function(sender, e) {
            console.log('获取焦点的窗体：' + sender.title);
        });
        this.onfull(function(s, e) {
            console.log('最大化：' + s.title);

        });
        this.onrestore(function(s, e) {
            console.log('还原窗体：' + s.title);

        });
        this.onfail(function(s,e){
            console.log('加载失败：'+e.url);
        });
    });*/
    console.log($ctrls.size());
</script>


</html>