<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
   
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Pagebox</title>
    <script type="text/javascript" src="Scripts/webdesk.ui.core.js"></script>
 <style type="text/css">
    body{
        padding: 20px;
    }
 </style>
   
</head>

<body>
<button type="button" id="openbox">创建子窗体</button><span id='pid'></span>
    <div>来自子窗体的输入：<span id="show" style="color: red;"></span></div>
   
   <div style="margin-top: 40px">
      在这里输入，将在父窗体显示
       <input type="text" name="fname" />
   </div> </body>
<script>


var btn=$dom('#openbox');
btn.click(function(){
    console.log(window.name);
	 //直接创建
    var box=window.top.$pagebox.create({
        width: 400,
        height: 300,
        resize: true,
        pid:window.name,
        url: 'pagebox -child.html'
    });	
    box.title='id:'+box.id;
    /*
    box.onfocus(function(sender,e){
         console.log('当前焦点窗体：'+sender.title);
    });*/
    box.open();
    $dom('#pid').html('child-id:'+box.id);

});

$dom('input').bind('input',function(){
     var v=$dom('input').val();
    console.log(v);
    var pbx=window.top.$pagebox;
    var boxparent=window.top.$pagebox.parent(window.name);
        if(boxparent){
            var doc=boxparent.document();
            doc.getChildInput(v);
        }else{
             $dom('#show').text('没有父窗体');
        }
    
   
});
//接收来自子窗体的录入
function getChildInput(txt){
    $dom('#show').text(txt);
}
</script>
</html>